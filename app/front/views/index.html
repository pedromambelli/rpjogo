<!DOCTYPE html>
<html lang="pt" ng-app='RPJogo'>
<head>
  <meta charset="utf-8">
  <title>RPJogo</title>

  <!-- Style -->
  <link rel="stylesheet" href="./../lib/css/bootstrap.css">
  <link rel="stylesheet" href="./../myStyle.css">
  <!-- JS Libs -->
  <script src="./../lib/js/angular.min.js" charset="utf-8"></script>

  <script src="./../lib/js/popper.min.js" charset="utf-8"></script>
  <script src="./../lib/js/jquery.min.js" charset="utf-8"></script>
  <script src="./../lib/js/bootstrap.js" charset="utf-8"></script>
  <script src="./../lib/js/angular-ui-router.js" charset="utf-8"></script>
  <script src="./../lib/js/pixi.min.js" charset="utf-8"></script>
  <script src="./../lib/js/honeycomb.min.js" charset="utf-8"></script>
  <script src="./../lib/js/konva.min.js" charset="utf-8"></script>


  <script src="./../lib/js/socket.io.js" charset="utf-8"></script>


  <!-- Models -->
  <script src="./../models/Board.js" charset="utf-8"></script>
  <!-- JS application -->
  <script src="./../angular/index.js" charset="utf-8"></script>
  <script src="./../angular/MainController.js" charset="utf-8"></script>

</head>
<body ng-controller='MainController' ng-class="{'place-pointer' : place_cursor_enabled}">

  <!-- <input type="text" name="" value="" ng-model='txt'>
  <p>{{txt}}</p>
  <button type="button" name="button" class="btn" ng-click='clogClicked()'>Console log</button> -->

  <div class="card" ng-class="{'sword-pointer'  : sword_cursor_enabled, 'heal-pointer'  : heal_cursor_enabled}" >
    <div class="row">
      <div class="col">
        <div class="card m-3" >
          <div class="card-body">
            <h5 class="card-title">{{last_clicked}}</h5>
            <div id="container" style='clear:both; overflow:auto; height:80vh; width:60vw' ng-init='initGrid()' ></div>

          </div>
          <div class="form-group">
            <label for="zoomSlider">Zoom</label>
            <input id='zoomSlider' type="range" min="0.8" max="5" step='0.1' class="custom-range" ng-model='gridScale' ng-change='scaleOnChange(gridScale)'>
          </div>
        </div>
      </div>

      <div class="card p-2 col " style="max-height : 90vh; overflow-y:scroll;">

        <div ng-if='formControll.enabled' class="card m-3 justify-content-md-center">



          <h5 class="card-title">Novo Token</h5>
          <div class="row p-1">

            <div class="input-group col">
              <div class="input-group-prepend">
                <span class="input-group-text">Nome</span>
              </div>
              <input class="form-control" type="text" ng-model='token_in_form.name' >

            </div>
            <div class="input-group col">
              <div class="input-group-prepend">
                <span class="input-group-text">Cor</span>
              </div>
              <!-- <input class="form-control" type="color" ng-model='token_in_form.color' value='#00FF00'> -->
              <select class="form-control" name="" ng-model='token_in_form.color' ng-init='token_in_form.color = grid_board.teams[0].color'>
                <option style='background-color:  {{team.color}}' ng-repeat='team in grid_board.teams' value="{{team.color}}">

                  <div class="input-group-prepend" style='background-color:  {{team.color}}'>
                    <span class="input-group-text"></span>
                  </div>
                  {{team.name}}
                </option>
              </select>
            </div>

          </div>
          <div ng-if="!formControll.validName(token_in_form.name) && formControll.isNew" class="row p-3">
            <div class="alert alert-danger"  role="alert">
              Já existe um token com este nome
            </div>
          </div>
          <div class="row p-1">

            <div class="input-group col">
              <div class="input-group-prepend">
                <img class="input-group-text" src="./../static/icons/shield-24.png" alt="">
                <!-- <span >CA</span> -->
              </div>
              <input class="form-control" type="number" ng-model='token_in_form.ca' ng-init='token_in_form.ca = 8'>
            </div>
            <div class="input-group col">
              <div class="input-group-prepend">
                <img class="input-group-text" src="./../static/icons/heart-24.png" alt="">
              </div>
              <input class="form-control" type="number" ng-model='token_in_form.hp_max' ng-init='token_in_form.hp_max = 20'>
            </div>
            <div class="input-group col">
              <div class="input-group-prepend">
                <img class="input-group-text" src="./../static/icons/walking-24.png" alt="">
              </div>
              <input class="form-control" type="number" ng-model='token_in_form.mov' ng-init = 'token_in_form.mov = 30'>
            </div>


          </div>

          <div class="row p-1">
            <div class="col form-group">
              <input type="file" class="form-control" id='imageFile' name="img_input" accept="image/png, image/jpeg" ng-model='img_src' onchange='angular.element(this).scope().changed_src(this)'>
              <img ng-src='{{img_src}}' alt="" width="200px" height="200px">

            </div>
          </div>

          <div class="row justify-content-md-center form-group">
            <button ng-if='formControll.isNew' type="button" name="button" class="btn btn-primary" ng-disabled='!formControll.isValid()' ng-click='saveNewTokenOnClick()'>Criar</button>
            <button ng-if='!formControll.isNew' type="button" name="button" class="btn btn-primary" ng-disabled='!formControll.isValid()' ng-click='saveTokenOnClick()'>Salvar</button>

          </div>

        </div>
        <div class="alert alert-secondary" role="alert" ng-if='isEmpty(tokens_dict)'>
          Não há tokens criados ainda
        </div>
        <div class="card m- justify-content-md-center">
          <button ng-if='!formControll.enabled' type="button" name="button" class="btn btn-success" ng-click='newTokenCreateOnClick()'>New Token</button>

        </div>

        <!-- Token List -->
        <div>
          <div class="card m-3 border-solid justify-content-md-center"  style='border-color : {{token.color}};' ng-repeat='token in token_dict' >
            <div class="row justify-content-md-left m-1">
              <div class="col">
                <img ng-src="{{token.token_image}}" alt="" width="100px" height="100px">
              </div>
              <div class="col-6">
                <div class="row justify-content-md-center" role="alert">
                  <h2>{{token.name}}</h2>
                </div>
                <div class="row justify-content-md-around ml-3">
                  <div class="">
                    <img class="" src="./../static/icons/heart-50.png" width="50px" height="50px">
                  </div>
                  <h3>{{token.hp_max}}</h3>
                  <div class="">
                    <img class="" src="./../static/icons/shield-50.png" width="50px" height="50px">
                  </div>
                  <h3>{{token.ca}}</h3>
                  <div class="">
                    <img class="" src="./../static/icons/walking-50.png" width="50px" height="50px">
                  </div>
                  <h3>{{token.mov}}</h3>
                </div>

              </div>
              <div class="col justify-content-md-center" ng-if='!formControll.enabled'>
                <button ng-if='token.token_refs' type="button" name="remove" class="btn btn-warning m-1" ng-click='removeTokenOnClick(token)'>Remove</button>
                <button ng-if='!token.token_refs' type="button" name="redraw" class="btn btn-primary m-1" ng-click='redrawTokenOnClick(token)'>Redraw</button>
                <button type="button" name="redraw" class="btn btn-primary m-1" ng-click='editTokenOnClick(token)'>Edit</button>
              </div>

            </div>

          </div>

        </div>


      </div>

    </div>


  </div>




</body>
</html>
